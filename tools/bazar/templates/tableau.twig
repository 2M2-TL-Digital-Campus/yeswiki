
{{ infoRes|raw }} {# affiche le nombre de résultats #}

{# l'id doit être unique - dans le cas où il y a plusieurs tableaux sur la même page
, on utilise $param['nbbazarliste'] qui s'incrémente à chaque fois qu'on appelle bazarliste
pour différencier les différents tableaux table_1 table_2 #}

<table id="table_{{ param.nbbazarliste}}" class="table table-condensed display" {#data-scroll-x="true"#}{{ nbbytab > 0 ? " data-paging=true data-page-length=#{nbbytab} data-length-change=false":''}}>
  <thead>
    <tr>
      {# Column titles #}
      {% for index,info in columnsInfo %}
        <th>{{ info.title }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for entry in entries %}
      <tr class="bazar-entry" {{ entry.html_data|raw }}>
        {% set searchTitle = ("bf_titre" in columnsInfo|map(p => p.propertyName)) %}
        {% for info in columnsInfo %}
          {% set val = entry[info.propertyName] %}
          <td>
            {% if info.key is empty %}
              {% if (searchTitle and info.propertyName == "bf_titre") or 
                    (not searchTitle and loop.first and not info.mapFieldId) %}
                <a href="{{ url({tag:entry.id_fiche}) }}" class="modalbox" data-size="modal-lg">
                  {{ val }}
                </a>
              {% elseif info.mapFieldId %}
                {{ val[info.mapFieldId] }}
              {% else %}
                {{ val }}
              {% endif %}
            {% else %}
              {{ (info.key in val|split(',')) ? 'X' : '' }}
            {% endif %}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>

{{ include_javascript('tools/templates/libs/vendor/datatables/jquery.dataTables.min.js') }}
{{ include_css('tools/templates/libs/vendor/datatables/dataTables.bootstrap.min.css') }}